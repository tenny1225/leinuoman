<html>

<head>
    <title>桃嘿嘿占卜</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style type="text/css">
        #bbody {
            width: 100%;
            height: 100%;
            padding:0;
            margin:0;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" ><text transform="rotate(30, 20, 40)" x="50" y="50" font-size="20" fill="rgb(75,75,75)" >桃嘿嘿</text></svg>');
            background-repeat: repeat;
            background-color: #14151a;
            
        }
        .btn{
            border-radius: 3px;
           outline: none;
            background-color: #bca58b;
            padding:6px;
            color:#14151a;
            font-weight:blod;
           
        }
    </style>
</head>

<body id="bbody">
    <div style="width:100%;height:45px;position: fixed;top:0px;background-color: #bca58b;line-height: 45px;padding-left:8px;color:#14151a;font-weight: bold;text-align:center;">桃嘿嘿占卜</div>
    <center style="margin-top: 50px;">
        <table id="tb" cellpadding="4" style="color:#f1f3f5">
        </table>
        <div id="tb2" style="color:#f1f3f5">正在加载...</div>
        <br><br>
        <div>
            <button onclick="xipai()" id="xipai" class="btn">重新洗牌</button>&nbsp;&nbsp;&nbsp;
            <button onclick="ok(1)" id="ok"  class="btn">线性</button>&nbsp;&nbsp;&nbsp;
            <button onclick="ok(2)" id="ok"  class="btn">十字(5)</button>&nbsp;&nbsp;&nbsp;
            <button onclick="ok(3)" id="ok"  class="btn">H阵(7)</button>&nbsp;&nbsp;&nbsp;
            <button onclick="ok(4)" id="ok"  class="btn">九宫格(9)</button>
        </div>
    </center>

</body>

<script>
    let selected = [];
    window.onload = function () {
        load(1);

    };
    function load(i) {
        if (i > 36) {
            document.getElementById("tb2").style.display = "none";
            xipai();
            return;
        }
        document.getElementById("tb2").innerHTML="<span>正在加载："+(i*100/36).toFixed(1)+"%</span>";
        let id = i;
        if (i < 10) id = "0" + i;
        let img = new Image();
        img.src =  id + '.jpg';
        img.onload = function () {
            load(i + 1)
        }
    }
    function xipai() {
        selected = [];
        let tb = document.querySelector("#tb");
        tb.innerHTML = "";
        let data = [];
        for (let i = 1; i <= 36; i++) {
            if (i < 10) {
                data.push("0" + i)
            } else {
                data.push(i)
            }
        }
        data.sort(function (a, b) {
            return Math.random() - 0.45;
        })
        for (let i = 0; i < 6; i++) {
            let tr = document.createElement("tr")
            for (let j = 0; j < 6; j++) {
                let td = document.createElement("td");
                td.style.verticalAlign = "middle";
                td.style.cursor = "pointer";
                let index =  j + 1 + i * 6
                let id =index;
                if (id < 10) id = "0" + id;
                td.innerHTML = "<div style='box-shadow:2px 0px 0px #999999;height:44.5px;width:28.5px;border-radius:3px;background-color:#bca58b;line-height:44.5px;'>" + id + "</div>"
                td.addEventListener("click", function () {
                    td.style.transform = "scale(0,1)";
                    td.style.transitionDuration = "0.3s";
                    selected.push(data[index-1]);
                    setTimeout(() => {
                        td.innerHTML = "<img src='" + data[index-1] + ".jpg' style='height:44.5px;width:28.5px;border-radius:3px;'>"
                        td.style.transform = "scale(1,1)";
                        td.style.transitionDuration = "0.3s";
                        td.removeEventListener("click");
                    }, 300);
                });
                td.style.textAlign = "center";
                tr.appendChild(td);
            }
            tb.appendChild(tr);
        }
    }
    function ok(v) {

        let data = [].concat(selected);
        selected = [];
        let tb = document.querySelector("#tb");
        tb.innerHTML = "";

        if (v == 1) {
            let tr = document.createElement("tr")
            for (let j = 0; j < data.length; j++) {
                let td = document.createElement("td");
                td.style.verticalAlign = "middle";
                td.style.height = "178px";
                td.style.width = "114px";
                td.style.cursor = "pointer";
                td.innerHTML = "<img src='" + data[j] + ".jpg' style='height:178px;width:114px;border-radius:6px;'>"
                td.style.textAlign = "center";
                tr.appendChild(td);
            }
            tb.appendChild(tr)
        } else if (v == 2 && data.length == 5) {
            for (let i = 0; i < 3; i++) {
                let tr = document.createElement("tr")

                for (let j = 0; j < 3; j++) {
                    let index = -1;
                    if (j + i * 3 == 3) {
                        index = 0
                    } else if (j + i * 3 == 4) {
                        index = 1;
                    } else if (j + i * 3 == 5) {
                        index = 2;
                    } else if (j + i * 3 == 1) {
                        index = 3;
                    } else if (j + i * 3 == 7) {
                        index = 4;
                    }

                    let td = document.createElement("td");
                    td.style.verticalAlign = "middle";
                    td.style.height = "178px";
                    td.style.width = "114px";
                    td.style.cursor = "pointer";
                    td.innerHTML = "<img src='" + data[index] + ".jpg' style='height:178px;width:114px;border-radius:6px;'>"
                    td.style.textAlign = "center";
                    if (index == -1) {
                        td.innerHTML = "<div style='height:178px;width:114px'></div>"

                    }
                    tr.appendChild(td);
                }
                tb.appendChild(tr);

            }



        } else if (v == 3 && data.length == 7) {

            for (let i = 0; i < 3; i++) {
                let tr = document.createElement("tr")
                for (let j = 0; j < 3; j++) {
                    let index = -1;
                    if (j + i * 3 == 0) {
                        index = 0
                    } else if (j + i * 3 == 3) {
                        index = 1;
                    } else if (j + i * 3 == 6) {
                        index = 2;
                    } else if (j + i * 3 == 2) {
                        index = 3;
                    } else if (j + i * 3 == 5) {
                        index = 4;
                    } else if (j + i * 3 == 8) {
                        index = 5;
                    } else if (j + i * 3 == 4) {
                        index = 6;
                    }

                    let td = document.createElement("td");
                    td.style.verticalAlign = "middle";
                    td.style.height = "178px";
                    td.style.width = "114px";
                    td.style.cursor = "pointer";
                    td.innerHTML = "<img src='" + data[index] + ".jpg' style='height:178px;width:114px;border-radius:6px;'>"
                    td.style.textAlign = "center";
                    if (index == -1) {
                        td.innerHTML = "<div style='height:178px;width:114px'></div>"

                    }
                    tr.appendChild(td)
                }
                tb.appendChild(tr);
            }

        } else if (v == 4 && data.length == 9) {
            for (let i = 0; i < 3; i++) {
                let tr = document.createElement("tr")
                for (let j = 0; j < 3; j++) {
                    let index = j + i * 3;
                    let td = document.createElement("td");
                    td.style.verticalAlign = "middle";
                    td.style.height = "178px";
                    td.style.width = "114px";
                    td.style.cursor = "pointer";
                    td.innerHTML = "<img src='" + data[index] + ".jpg' style='height:178px;width:114px;border-radius:6px;'>"
                    td.style.textAlign = "center";
                    if (index == -1) {
                        td.innerHTML = "<div style='height:178px;width:114px'></div>"

                    }
                    tr.appendChild(td)
                }
                tb.appendChild(tr);
            }

        }


    }
</script>

</html>